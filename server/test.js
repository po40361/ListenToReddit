body = "TIFU by not locking my front door or using the sock signal. I am dumber than a freshman.\n\nThis happened in late March. I will never forget this day. I traumatized a Freshman, a French teacher, and myself. \n\n(all names are placeholders)\n\nBackground : (feel free to skip)\n\nThis all started last April when I was flying connection out of LHR to return to University in the states following spring break. You see it’d been just my luck that my airline upgraded me to first class, only to cancel my flight due to a malfunctioning door. Needless to say, I was delayed for many hours. \n\nThis is where I met Émeline, it turns out she was on the same flight as me and had also gone to complain to our airline’s concierge. She appeared to be about my age or a year younger, so I decided to talk to her and practice some of my mediocre French. We waited about an hour for the flight, in which time we commiserated and bought tea. I was rather comfortable at first, but I was taken aback by her intelligence, wittiness, charm and beauty. I learned she had recently graduated with a degree in English and was moving overseas for work in the same city as where my university is located. We ended up exchanging numbers with the promise that I’d invite her out sometime soon. Unfortunately, that never happened, between me double majoring in French and International Relations and my summer internships.\n\nCut to July, past my internship, past my 21st birthday, and a new apartment with my best friend’s younger brother, named Greg. Greg and I were able to find a semi-luxurious high rise apartment in the city center with a pool and all the amenities. Unfortunately we learn that its also home to university staff and professors, and realize we can’t nonchalantly have parties, but we decide the pad’s worth it. \n\nSo August comes around and there I am at the grocery store a block away from my apartment. I run into Émeline. I don’t waste the chance to invite her to dinner—apologizing for failing to get in touch. We go out the following weekend and she’s extremely flirty, I know it’s a French cultural thing, but it’s still irresistible. I attempted being accommodating of her space, but one thing little touch lead to another and by the time our Lyft’s had arrived, we were hanging on to each other. I still didn’t want to jump on her immediately, so I arranged for a second date. Note, I’m back at the apartment and I swear I see Émiline in the lobby, maybe I’m just in love. \n\nWe do start to fall in love over the next few dates, but we never are able to go back to our apartments because of our roommates. Unfortunately school rolls around at this time and I let her know that I’ll be busy.\n\nNow one thing that stupidly shot over both of our heads during this time, was where I was attending university, and where she had just begun teaching, nobody wants to talk about work and school I guess... We don’t spend much time talking about serious things anyways, we are both very playful. But God, it would have been helpful if we had shared that information. \n\n3rd week on campus, fall 2019, I’m walking between classes amongst the crowd, when I see what looks like Émeline walking towards me, I get an awful wave of cringe and shock, that can only be surmised with, “Ohhh... FUCK!” She notices me: “We’ll talk later.” \n\nIt turns out talk really meant talk. She was rightfully worried about our relationship pertaining to her career. Luckily, It’s not against university rules to have student-faculty relationships, and our case happens to meet parameters in which it is allowed. What worries us most is the possible publication of our relationship if it is found out. So, we decided to keep it private while on campus. \n\nAlso, as it turns out, Émeline is an intermediate II French teacher, my roommate was an intermediate I French student in fall 2019. This only leads to exacerbate the following situation in March.\n\nMarch : (main part)\n\nAfter 6 months of semi-secret dating, Émeline and I, haven’t had full shaft, 100% committed sex. The most we had been able to have were a few heated sessions in our cars, mostly because of our roommates. Just as I convinced my roommate to join a club—in order to give me and Émeline time to be alone in my apartment—she tells me of the potential school shutdown and quarantine. We realize if we don’t take the opportunity to get time for ourselves now, we won’t be able to later. My roommate Greg lets me know that if there’s a quarantine, he’ll most likely be staying in our apartment. This adds urgency to the need Émeline and I have to fornicate like wild animals. \n\nLate-March, Greg informed me that he’ll be getting fast food for dinner because he’ll be attending a club meeting. “Yes! I’m home alone for a couple hours. I’ll call Émeline,” For whatever reason we sit in my living room, as if we are repenting for the lustful sins that we are about to commit. We do this for about half an hour—only if we had started sooner. Unbeknownst to me, Greg has arrived on campus and is currently heading to his club meeting. Still back at my apartment, we warm up at a painstakingly slowly crawl. Greg is back on campus at his club’s meeting location—but something is wrong. No one is there. He checks his phone, the quarantine has begun. All club meetings are canceled. “Fuck, what a waste of time,” says Greg.\n\nGreg drives back to our apartment—note that our apartment is about 10 minutes away from the university. This leaves Émeline and I just enough time to transfer from a slow warm up to heated throws of passion. Now, here is Greg, silently entering our apartment, he notes that the door is open, he also hears what appears to be the sounds of struggling coming from the living room. Me and Émeline are approaching the limits of love. Greg runs in with a golf club raised high.\n\nGreg freezes. I freeze, Émeline freezes. All of us simultaneously, “Oh Fuck,” “Shit,” “Putain,”\n\nOh why Greg, why did you have to run in! I will forever see Greg’s war face when I make love to my girlfriend. \n\nGreg, “Uhm... Mlle. Blanc?”\n\nÉmeline, “Ta gueule! Out! We are going to have a talk!”\n\nThis is where my fuck up gets worse, Greg walks out of the apartment to get dinner. In my rage at the guy—for interrupting what was then going to be my only time with Émeline for a while—I lock him out. I tell him to fuck off when he returned. This happens right after Quarantine started. He ended up banging on the door a few times, before deciding to sleep in his car. I guess he called his brother, who in turn called me multiple times, probably to ask me to open the door. Greg is locked out for a day, almost two. The word eventually gets back to our parents, who are both strict Catholics and close friends, nothing need be said here. My allowance is cut. \n\nÉmeline eventually talked to Greg a couple days after, I didn’t ask about their conversation, but she’s a nice girl, so I think she bought him a flight home and bribed him a bit so he wouldn’t tell other freshman. Unfortunately, our relationship became public knowledge thanks to other, but still related, means. I also regret next year when I’ll once again share an apartment with Greg after what has happened. Why Greg! Please don’t be awkward! *Cries* 😩😭😭😭\n\nNow his brother, my best friend from high school, is pissed at me. Likewise, Émeline is also very embarrassed. And I’ve since had some patchwork to do. That’s not all. My year now knows me as the guy that fucks the freshman French teacher, and I think I will carry that with me to my grave, Émeline as well. The memes are rampant, gossip is high, and I’m decently sure that if I break up, this will cut off my chance to date anyone who knows. \n\nRemember, to always use the sock signal, and to lock your door. And if you date a teacher, someone’s going to find out.\n\nTLDR; My best friend’s little brother who’s my college roommate walked in on me and his 24 year old professor having passionate sex.\n\nEdit: Grammar/Spelling/Flow\n\nNote: If by chance you know me. Don’t dox."

const { writeFile } = require("./getTopPosts")

var splitPosts = {}

for (i = 0; i < 1; i++) {

    // var post = clonedInput[i]

    // var body = post["selftext"]
    // var title = post["title"]
    // console.log(title)
    // console.log(body)
    var newline = "\n\n"
    // body = title.concat(newline, body)
    // console.log("title: ", title)
    // console.log("body: ", body)
    var postSegments = []
    key = "post" + i

    // keys.push(key)

    if (body.length > 5000) {
        var remainingLength = body.length
        var currentStart = 0
        var currentEnd = 5000

        while (remainingLength > 5000) {
            if (body[currentEnd - 1] != ".") {
                for (j = currentEnd - 1; j > currentStart; j--) {
                    if (body[j] == ".") {
                        currentEnd = j + 1
                        break;
                    }
                }
            }

            postSegments.push(body.substring(currentStart, currentEnd))
            currentStart = currentEnd
            currentEnd = currentStart + 4999
            remainingLength = body.length - currentStart

        }
        if (remainingLength > 0) {
            postSegments.push(body.substring(currentStart, body.length))
        }

    } else if (body.length < 5000) {

        postSegments.push(body)
    }

    splitPosts[key] = postSegments
}

writeFile(JSON.stringify(splitPosts), "stringSplitTest.json")